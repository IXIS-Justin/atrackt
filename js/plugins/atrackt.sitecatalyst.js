// Generated by CoffeeScript 1.4.0
(function() {
  var buildLinkName, buildSObject;

  ({
    options: {
      propLimit: 100,
      version: 14,
      delimiters: {
        linkName: '/',
        category: '|'
      },
      propMap: {
        'location': 'prop1',
        'categories': 'prop2',
        'ctaValue': 'prop3',
        'event': 'prop4',
        'model': 'prop20',
        'trimline': 'prop30'
      }
    }
  });

  buildSObject = function(obj) {
    var eventsArray, i, varsArray, _i, _len, _ref;
    switch (options.version) {
      case 14:
        varsArray = ['products', 'events'];
        eventsArray = [];
        _ref = Array(options.propLimit);
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          i = _ref[_i];
          varsArray.push('prop' + (_i + 1));
          varsArray.push('eVar' + (_i + 1));
          eventsArray.push('event' + (_i + 1));
        }
        s.linkTrackVars = varsArray.join(',');
        s.linkTrackEvents = eventsArray.join(',');
        $.extend(s, obj);
        break;
      case 15:
        s.contextData = obj;
    }
    return s;
  };

  buildLinkName = function(obj) {
    var linkName;
    linkName = [];
    obj.categories = obj.categories.join(options.delimiters.category);
    switch (options.version) {
      case 14:
        linkName = [obj.prop1, obj.prop2, obj.prop3];
        break;
      case 15:
        linkName = [obj.location, obj.categories, obj.ctaValue];
    }
    return linkName.join(options.delimiters.linkName);
  };

  window.Atrackt.registerPlugin('sitecatalyst', {
    events: {
      click: ['a', 'button']
    },
    send: function(obj) {
      if ((typeof s !== "undefined" && s !== null) && s.tl) {
        buildSObject(obj);
        return s.tl(true, 'o', buildLinkName(obj));
      } else {
        return console.log('SITECATALYST SCRIPT NOT LOADED!', obj);
      }
    }
  });

}).call(this);
